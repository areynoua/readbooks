jQuery(function(e){e(".profile-pic-upload").on("click",function(t){t.preventDefault(),ur_my_account_params.current_user_can||(wp.media.controller.Library.prototype.defaults.contentUserSetting=!1,wp.media.controller.Library.prototype.defaults.router=!1,wp.media.controller.Library.prototype.defaults.searchable=!0,wp.media.controller.Library.prototype.defaults.sortable=!1);var i=e(this).closest("form").find("img.profile-preview"),r=wp.media({title:ur_my_account_params.upload_image,button:{text:ur_my_account_params.select_image},multiple:!1}).open(),o=e(this).closest("form").find('input[name="profile-pic-id"]'),l=e(this).closest("form").find("button.profile-pic-remove");r.on("select",function(){var e,t,a=r.state().get("selection").first(),s=a.toJSON().sizes.full.url;t=a.toJSON().sizes.full.url,e=a.toJSON().id,""!==(s=_.isUndefined(a.toJSON().sizes.thumbnail)?t:a.toJSON().sizes.thumbnail.url)&&(i.attr("src",s),o.val(e),l.show())})}),e(".profile-pic-remove").on("click",function(t){t.preventDefault();var i=e(this).closest("form").find('input[name="profile-pic-id"]'),r=e(this).closest("form").find('input[name="profile-default-image"]'),o=e(this).closest("form").find("img.profile-preview");i.val(""),o.attr("src",r.val()),e(this).hide()})});